# 10. ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

## ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-10-30
- **í”„ë¡œì íŠ¸ëª…**: ë…¼ë¬¸ ë¦¬ë·° ì±—ë´‡ (AI Agent + RAG)
- **íŒ€ëª…**: ì—°ê²°ì˜ ë¯¼ì¡±
- **ì‘ì„±ì**: ì—°ê²°ì˜ ë¯¼ì¡± íŒ€

---

## 1. ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½

### 1.1 ê¸°ìˆ  ìŠ¤íƒ êµ¬ì¡°ë„

```mermaid
graph TB
    subgraph Frontend["ğŸ”¸ í”„ë¡ íŠ¸ì—”ë“œ"]
        direction LR
        UI[Streamlit<br/>1.28+]
    end

    subgraph Backend["ğŸ”¹ ë°±ì—”ë“œ"]
        direction TB
        LG[LangGraph<br/>0.0.20] --> LC[Langchain<br/>0.1.0]
        LC --> LLM1[OpenAI API<br/>GPT-4 / GPT-3.5]
        LC --> LLM2[Solar API<br/>solar-pro]
        LC --> Search[Tavily Search<br/>API]
    end

    subgraph Data["ğŸ”º ë°ì´í„°"]
        direction LR
        PG[PostgreSQL<br/>15+] --> PGV[pgvector<br/>0.5.0+]
        EMB[OpenAI<br/>Embeddings]
    end

    UI --> LG
    LLM1 --> Data
    LLM2 --> Data
    Search --> Data

    %% Subgraph ìŠ¤íƒ€ì¼
    style Frontend fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style Backend fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style Data fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼
    style UI fill:#90caf9,stroke:#1976d2,color:#000
    style LG fill:#ce93d8,stroke:#7b1fa2,color:#000
    style LC fill:#ba68c8,stroke:#7b1fa2,color:#fff
    style LLM1 fill:#ab47bc,stroke:#4a148c,color:#fff
    style LLM2 fill:#ab47bc,stroke:#4a148c,color:#fff
    style Search fill:#9c27b0,stroke:#4a148c,color:#fff
    style PG fill:#a5d6a7,stroke:#388e3c,color:#000
    style PGV fill:#81c784,stroke:#2e7d32,color:#000
    style EMB fill:#66bb6a,stroke:#2e7d32,color:#fff
```

### 1.2 ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

| êµ¬ë¶„ | ì„ íƒ ê¸°ìˆ  | ë²„ì „ | ì´ìœ  |
|------|----------|------|------|
| **LLM API** | OpenAI (GPT-4/GPT-3.5-turbo) + Solar (solar-pro) | Latest | OpenAI: ë†’ì€ ì„±ëŠ¥, ì•ˆì •ì  Function Calling<br/>Solar: í•œêµ­ì–´ íŠ¹í™”, ë¹„ìš© íš¨ìœ¨ì  |
| **Framework** | Langchain + LangGraph | 0.1.0+ | AI Agent ë° RAG í†µí•© ê°œë°œ |
| **Database** | PostgreSQL + pgvector | 15+ / 0.5.0+ | ê´€ê³„í˜• + ë²¡í„° ê²€ìƒ‰ í†µí•© |
| **Embeddings** | OpenAI text-embedding-3-small | Latest | ë¹„ìš© íš¨ìœ¨ì , ë†’ì€ ì •í™•ë„ |
| **UI Framework** | Streamlit | 1.28+ | ë¹ ë¥¸ ê°œë°œ, ì±„íŒ… UI ìµœì í™” |
| **Web Search** | Tavily Search API | Latest | AI Agent ë„êµ¬, ë¬´ë£Œ í‹°ì–´ |
| **Python** | Python | 3.10+ | Langchain í˜¸í™˜ì„± |

---

## 2. í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

### 2.1 Core Dependencies

```txt
# requirements.txt

# Langchain & LangGraph
langchain==0.1.0
langchain-openai==0.0.2
langchain-community==0.0.13
langgraph==0.0.20
langchain-postgres==0.0.1

# OpenAI
openai==1.6.1

# Database
psycopg2-binary==2.9.9
pgvector==0.2.3

# Vector Store
chromadb==0.4.18  # ì„ íƒ ì‚¬í•­ (ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©)

# Web Search
tavily-python==0.3.0

# UI
streamlit==1.28.2
streamlit-chat==0.1.1

# Document Processing
pypdf==3.17.1
pdfplumber==0.10.3
arxiv==2.1.0

# Text Splitting
tiktoken==0.5.2

# Evaluation (ì„ íƒ)
ragas==0.1.0

# Utilities
python-dotenv==1.0.0
pydantic==2.5.3
pyyaml==6.0.1

# Logging & Monitoring
tqdm==4.66.1

# Testing
pytest==7.4.3
pytest-asyncio==0.21.1
```

### 2.2 ê°œë°œ ë„êµ¬ (Development Dependencies)

```txt
# requirements-dev.txt

black==23.12.1       # ì½”ë“œ í¬ë§·íŒ…
flake8==7.0.0        # ë¦°íŒ…
mypy==1.7.1          # íƒ€ì… ì²´í‚¹
ipython==8.18.1      # ëŒ€í™”í˜• ì…¸
jupyter==1.0.0       # ë…¸íŠ¸ë¶ (ì‹¤í—˜ìš©)
```

---

## 3. í™˜ê²½ ì„¤ì •

### 3.1 Python í™˜ê²½

**ê¶Œì¥:** Python 3.10 ì´ìƒ

```bash
# Python ë²„ì „ í™•ì¸
python --version  # Python 3.10+ í•„ìš”

# ê°€ìƒ í™˜ê²½ ìƒì„±
python -m venv venv

# ê°€ìƒ í™˜ê²½ í™œì„±í™” (Linux/Mac)
source venv/bin/activate

# ê°€ìƒ í™˜ê²½ í™œì„±í™” (Windows)
venv\Scripts\activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### 3.2 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**.env íŒŒì¼ ìƒì„±:**

```bash
# .env

# OpenAI API
OPENAI_API_KEY=your-openai-api-key-here

# Solar API (Upstage)
SOLAR_API_KEY=your-solar-api-key-here

# PostgreSQL
POSTGRES_USER=your_username
POSTGRES_PASSWORD=your_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=papers

# Tavily Search API
TAVILY_API_KEY=your-tavily-api-key-here

# ê°œë°œ í™˜ê²½
ENVIRONMENT=development  # development, production
LOG_LEVEL=INFO          # DEBUG, INFO, WARNING, ERROR

# LLM ì„¤ì •
LLM_MODEL=gpt-3.5-turbo  # development: gpt-3.5-turbo/solar-pro, production: gpt-4
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000

# Solar LLM ì„¤ì •
SOLAR_MODEL=solar-pro  # solar-pro, solar-mini
SOLAR_TEMPERATURE=0.7
SOLAR_MAX_TOKENS=2000

# Embeddings ì„¤ì •
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536
```

**.env.example íŒŒì¼:**

```bash
# .env.example (Gitì— í¬í•¨)

OPENAI_API_KEY=sk-...
SOLAR_API_KEY=up-...
POSTGRES_USER=your_username
POSTGRES_PASSWORD=your_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=papers
TAVILY_API_KEY=tvly-...
ENVIRONMENT=development
LOG_LEVEL=INFO
LLM_MODEL=gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìš”êµ¬ì‚¬í•­

### 4.1 PostgreSQL ì„¤ì¹˜

**Linux (Ubuntu):**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

**macOS (Homebrew):**
```bash
brew install postgresql@15
brew services start postgresql@15
```

**Windows:**
- [PostgreSQL ê³µì‹ ì‚¬ì´íŠ¸](https://www.postgresql.org/download/windows/)ì—ì„œ ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ

### 4.2 pgvector í™•ì¥ ì„¤ì¹˜

```bash
# PostgreSQL 15+ì—ì„œ pgvector ì„¤ì¹˜
git clone https://github.com/pgvector/pgvector.git
cd pgvector
make
sudo make install

# PostgreSQLì—ì„œ í™•ì¥ í™œì„±í™”
psql -U postgres -d papers
CREATE EXTENSION vector;
```

### 4.3 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```bash
# PostgreSQL ì ‘ì†
sudo -u postgres psql

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE papers;

# ì‚¬ìš©ì ìƒì„± (ì„ íƒ)
CREATE USER your_username WITH PASSWORD 'your_password';

# ê¶Œí•œ ë¶€ì—¬
GRANT ALL PRIVILEGES ON DATABASE papers TO your_username;

# pgvector í™•ì¥ í™œì„±í™”
\c papers
CREATE EXTENSION vector;
```

### 4.4 ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”

```bash
# ìŠ¤í‚¤ë§ˆ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
psql -U your_username -d papers -f database/schema.sql
```

---

## 5. API í‚¤ ë°œê¸‰

### 5.1 OpenAI API

1. [OpenAI Platform](https://platform.openai.com/) ê°€ì…
2. API Keys ë©”ë‰´ì—ì„œ ìƒˆ API í‚¤ ìƒì„±
3. `.env` íŒŒì¼ì— `OPENAI_API_KEY` ì„¤ì •

**ë¹„ìš©:**
- GPT-4: $0.03/1K tokens (input), $0.06/1K tokens (output)
- GPT-3.5-turbo: $0.0015/1K tokens (input), $0.002/1K tokens (output)
- text-embedding-3-small: $0.02 / 1M tokens

### 5.2 Solar API (Upstage)

1. [Upstage Console](https://console.upstage.ai/) ê°€ì…
2. API Keys ë©”ë‰´ì—ì„œ ìƒˆ API í‚¤ ìƒì„±
3. `.env` íŒŒì¼ì— `SOLAR_API_KEY` ì„¤ì •

**ë¹„ìš©:**
- Solar-pro: í•œêµ­ì–´ íŠ¹í™”, ë¹„ìš© íš¨ìœ¨ì 
- ë¬´ë£Œ í‹°ì–´ ì œê³µ

### 5.3 Tavily Search API

1. [Tavily](https://tavily.com/) ê°€ì…
2. API Keys ìƒì„±
3. `.env` íŒŒì¼ì— `TAVILY_API_KEY` ì„¤ì •

**ë¬´ë£Œ í‹°ì–´:** ì›” 1,000 ê²€ìƒ‰ ë¬´ë£Œ

---

## 6. ê°œë°œ ë„êµ¬ ì„¤ì •

### 6.1 Git ì„¤ì •

```bash
# Git ì´ˆê¸°í™”
git init

# .gitignore ì„¤ì •
cat > .gitignore << EOF
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
venv/
env/

# í™˜ê²½ ë³€ìˆ˜
.env

# ë°ì´í„°
data/raw/pdfs/
data/processed/
experiments/

# IDE
.vscode/
.idea/
*.swp

# OS
.DS_Store
Thumbs.db

# Logs
*.log
EOF
```

### 6.2 VS Code ì„¤ì •

**.vscode/settings.json:**
```json
{
    "python.defaultInterpreterPath": "./venv/bin/python",
    "python.linting.enabled": true,
    "python.linting.flake8Enabled": true,
    "python.formatting.provider": "black",
    "editor.formatOnSave": true,
    "editor.rulers": [88],
    "[python]": {
        "editor.tabSize": 4
    }
}
```

**.vscode/extensions.json:**
```json
{
    "recommendations": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "ms-toolsai.jupyter"
    ]
}
```

---

## 7. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### 7.1 í•˜ë“œì›¨ì–´

**ìµœì†Œ ìš”êµ¬ì‚¬í•­:**
- CPU: 2 cores
- RAM: 4GB
- ì €ì¥ ê³µê°„: 10GB

**ê¶Œì¥ ìš”êµ¬ì‚¬í•­:**
- CPU: 4+ cores
- RAM: 8GB+
- ì €ì¥ ê³µê°„: 20GB+
- SSD (PostgreSQL ì„±ëŠ¥ í–¥ìƒ)

### 7.2 ìš´ì˜ ì²´ì œ

- Linux (Ubuntu 20.04+, Debian 11+)
- macOS (12.0+)
- Windows 10/11 (WSL2 ê¶Œì¥)

---

## 8. ì„¤ì¹˜ ë° ì‹¤í–‰ ê°€ì´ë“œ

### 8.1 ì „ì²´ ì„¤ì¹˜ ì ˆì°¨

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd langchain-project

# 2. ê°€ìƒ í™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# 3. íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ API í‚¤ ë“± ì„¤ì •

# 5. PostgreSQL ì„¤ì •
# (ìœ„ì˜ 4.3, 4.4 ì°¸ì¡°)

# 6. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
python scripts/init_database.py

# 7. ë…¼ë¬¸ ë°ì´í„° ìˆ˜ì§‘ (ì„ íƒ)
python scripts/collect_papers.py

# 8. VectorDB êµ¬ì¶• (ì„ íƒ)
python scripts/build_vectordb.py

# 9. Streamlit ì‹¤í–‰
streamlit run ui/app.py
```

### 8.2 ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# Streamlit UI ì‹¤í–‰
streamlit run ui/app.py

# ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ ì—´ë¦¼ (http://localhost:8501)
```

---

## 9. ì„¤ì • íŒŒì¼

### 9.1 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (configs/db_config.yaml)

```yaml
postgresql:
  host: ${POSTGRES_HOST}
  port: ${POSTGRES_PORT}
  database: ${POSTGRES_DB}
  user: ${POSTGRES_USER}
  password: ${POSTGRES_PASSWORD}

pgvector:
  collections:
    - name: paper_chunks
      dimension: 1536
    - name: paper_abstracts
      dimension: 1536
    - name: glossary_embeddings
      dimension: 1536
```

### 9.2 ëª¨ë¸ ì„¤ì • (configs/model_config.yaml)

```yaml
llm:
  development:
    model: gpt-3.5-turbo
    temperature: 0.7
    max_tokens: 2000
    streaming: true
  production:
    model: gpt-4
    temperature: 0.7
    max_tokens: 3000
    streaming: true

embeddings:
  model: text-embedding-3-small
  dimension: 1536
  batch_size: 100

rag:
  chunk_size: 1000
  chunk_overlap: 200
  top_k: 5
  search_type: mmr  # similarity, mmr
```

---

## 10. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 10.1 PostgreSQL ì—°ê²° ì˜¤ë¥˜

**ë¬¸ì œ:** `psycopg2.OperationalError: could not connect to server`

**í•´ê²°:**
```bash
# PostgreSQL ì‹¤í–‰ í™•ì¸
sudo systemctl status postgresql

# PostgreSQL ì‹œì‘
sudo systemctl start postgresql

# ì—°ê²° í…ŒìŠ¤íŠ¸
psql -U your_username -d papers -h localhost
```

### 10.2 pgvector ì„¤ì¹˜ ì˜¤ë¥˜

**ë¬¸ì œ:** `ERROR: extension "vector" is not available`

**í•´ê²°:**
```bash
# pgvector ì¬ì„¤ì¹˜
git clone https://github.com/pgvector/pgvector.git
cd pgvector
make clean
make
sudo make install

# PostgreSQL ì¬ì‹œì‘
sudo systemctl restart postgresql
```

### 10.3 OpenAI API ì˜¤ë¥˜

**ë¬¸ì œ:** `openai.error.AuthenticationError: Incorrect API key`

**í•´ê²°:**
1. `.env` íŒŒì¼ì—ì„œ `OPENAI_API_KEY` í™•ì¸
2. API í‚¤ ìœ íš¨ì„± í™•ì¸: https://platform.openai.com/api-keys
3. í™˜ê²½ ë³€ìˆ˜ ì¬ë¡œë“œ: `source .env` ë˜ëŠ” ì„œë²„ ì¬ì‹œì‘

### 10.4 Streamlit ì‹¤í–‰ ì˜¤ë¥˜

**ë¬¸ì œ:** `ModuleNotFoundError: No module named 'streamlit'`

**í•´ê²°:**
```bash
# ê°€ìƒ í™˜ê²½ í™œì„±í™” í™•ì¸
which python  # venv ê²½ë¡œê°€ ë‚˜ì™€ì•¼ í•¨

# Streamlit ì¬ì„¤ì¹˜
pip install streamlit --upgrade
```

---

## 11. ì„±ëŠ¥ ìµœì í™” ì„¤ì •

### 11.1 PostgreSQL ì„±ëŠ¥ íŠœë‹

**postgresql.conf ìˆ˜ì •:**
```ini
# /etc/postgresql/15/main/postgresql.conf

shared_buffers = 256MB          # RAMì˜ 25%
effective_cache_size = 1GB      # RAMì˜ 50~75%
work_mem = 16MB
maintenance_work_mem = 128MB
```

### 11.2 Connection Pooling

```python
# src/utils/db.py

from psycopg2 import pool

connection_pool = pool.SimpleConnectionPool(
    minconn=1,
    maxconn=10,
    host=os.getenv("POSTGRES_HOST"),
    port=os.getenv("POSTGRES_PORT"),
    database=os.getenv("POSTGRES_DB"),
    user=os.getenv("POSTGRES_USER"),
    password=os.getenv("POSTGRES_PASSWORD")
)
```

---

## 12. ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

### 12.1 API í‚¤ ê´€ë¦¬

1. **.env íŒŒì¼ì„ Gitì— ì»¤ë°‹í•˜ì§€ ì•Šê¸°**
   - `.gitignore`ì— `.env` ì¶”ê°€

2. **í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©**
   - ì½”ë“œì— API í‚¤ í•˜ë“œì½”ë”© ê¸ˆì§€

3. **í‚¤ ë¡œí…Œì´ì…˜**
   - ì£¼ê¸°ì ìœ¼ë¡œ API í‚¤ ë³€ê²½

### 12.2 ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ

1. **ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©**
2. **ì™¸ë¶€ ì ‘ê·¼ ì œí•œ** (localhostë§Œ í—ˆìš©)
3. **ì •ê¸° ë°±ì—…**

---

## 13. ì°¸ê³  ìë£Œ

- Langchain ê³µì‹ ë¬¸ì„œ: https://python.langchain.com/docs/
- LangGraph ê³µì‹ ë¬¸ì„œ: https://langchain-ai.github.io/langgraph/
- PostgreSQL ê³µì‹ ë¬¸ì„œ: https://www.postgresql.org/docs/
- pgvector GitHub: https://github.com/pgvector/pgvector
- Streamlit ê³µì‹ ë¬¸ì„œ: https://docs.streamlit.io/
- OpenAI API ë¬¸ì„œ: https://platform.openai.com/docs/
